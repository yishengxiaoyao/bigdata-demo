# 弹力设计

## 认识故障和弹力设计
### 系统可用性测量
可用性 = MTTF/(MTTF+MTTR)
MTTF平均故障前的时间，即系统平均能够正常运行多长时间才发生一次故障(正常运行的时间)。
MTTR平均修复时间，即从故障出现到故障修复的这段时间。

### 故障分类
无计划的宕机:
>* 系统故障,包括主机、操作系统、中间件、数据库、网络、电源以及外围设备。
>* 数据和中介的故障，包括人员误操作、硬盘故障、数据乱了。
>* 自然灾害、人为破坏，以及供电问题等。

有计划的宕机:
>* 日常任务:备份，容量规划，用户和安全管理，后台批处理应用。
>* 运维相关:数据库维护、应用维护、中间件维护、操作系统维护、网络维护。
>* 升级相关:数据库、应用、中间件、操作系统、网络，包括硬件升级。

## 隔离设计

系统的隔离分为两种:以服务的种类来做分离；以用户来做分离。

### 按服务的种类来做分离



### 按照用户来做分离

多租户的做法:
>* 完全独立的设计。每个租户有自己完全独立的服务和数据。
>* 独立的数据分区，共享的服务。多组合的服务是共享的，但数据是分开隔离的。
>* 共享的服务，共享的数据分区。每个租户的数据和服务都是共享的。

| |完全独立资源|共享的服务接口<br/>独立的数据分区|共享的服务接口<br/>共享的数据分区|
|----|----|----|----|
|资源共享度|低|中|高|
|实现复杂度|低|中|高|
|隔离度|高|中|低|
|占用成本度|高|中|低|



1.系统的隔离分为两种:以服务的种类来做分离；以用户来做分离。
2.按照服务的种类做分离:根据服务种类的不同，分成不同的类别，将不同的服务隔离起来。
3.按照用户来做分离:多租户的做法有完全独立的设计、独立的数据分区共享的服务、服务和数据都要共享，根据需求不同，难以程度不同。