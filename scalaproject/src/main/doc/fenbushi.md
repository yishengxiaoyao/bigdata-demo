# 分布式相关
## 分布式产生的原因
>* 增大系统容量:随着业务的扩大，一台机器的性能无法满足需求，需要多台机器应对大规模的应用场景。
>* 加强系统可用:系统不能因为一台机器出现故障而导致整体不可用，需要消除单点故障。

## 单体架构 vs 分布式架构
| |传统单体架构|分布式服务化架构|
|----|----|----|
|新功能开发|需要时间|需要开发和实现|
|部署|不经常且容易部署|经常开发，部署复杂|
|隔离性|故障影响范围大|故障影响范围小|
|架构设计|难度小|难度系数增加(分布式事物)|
|系统性能|响应时间快，吞吐量小|响应时间慢，吞吐量大|
|系统运维|运维简单|运维复杂|
|新人上手|学习曲线大|学习曲线大|
|技术|技术单一且封闭|技术多样且开放|
|测试和差错|简单|复杂|
|系统扩展性|扩展性很差|扩展性很好|
|系统管理|重点在开发开发|重点在于服务治理和调度|

## 分布式系统中需要注意的问题
### 异构系统的不标准问题
每个系统会根据需求的不同，会有不同的开发语言、数据格式、通讯协议，开发和运维的方式也会有不同。

### 系统架构中的服务依赖性问题
服务之间是相互依赖，如果一个服务发生故障，就会影响其他服务。

### 故障发生的概率更大
机器和服务数量越来越多时，人类无法做到事无巨细。

### 多层的架构运维复杂度更大
多层架构，就会牵扯到更多的技术，运维同学不可能对所有的数据都很熟。


## 分布式系统的技术栈
构建分布式系统的目的是增加系统容量，提高系统的可用性。

### 提高架构的性能
|系统|介绍|相关软件|
|----|----|----|
|缓存系统|提高系统的访问能力:<br/>a.缓存分区(根据需求设置分区负责);<br>.缓存更新(设置更新策略);<br/>c.缓存命中(读写分离)|Redis|
|负载均衡|负载均衡是水平扩张的关键技术，<br/>将流量分配到不同的机器上，<br/>保证服务高可用性|nginx、ELB、HAProxy、LVS|
|异步调用|通过队列来对请求进行处理，<br/>增加吞吐量，减少服务压力，<br/>时效性差|Kafka、RabbitMQ|
|数据镜像|数据库做成多分一样数据||
|数据分区|将数据分成不同的区域||


### 提高系统的稳定性

|技术|介绍|
|----|----|
|服务拆分|服务隔离;重用服务模块|
|服务冗余|解决单点故障，快速伸缩，以及故障迁移|
|限流降流|流量过滤，或者屏蔽用户|
|高可用架构|多租户隔离，灾备多火，不出现单点故障|
|高可用运维|Devops中的CI/CD|


### 分布式系统的关键技术
>* 服务治理:服务之间的依赖关系、调用关系，梳理重要服务，并且对服务的可用性和性能管理。
>* 架构软件管理:服务有各种版本，服务之间有依赖关系，如何做到不出现兼容行问题。
>* Devops:环境构建、持续集成、持续部署等。
>* 自动化运维:自动化部署、自动伸缩、自动恢复、故障自动迁移等。
>* 资源调度管理:平台在节点出现问题是时，自动调度任务到其他节点上运行。
>* 整体架构监控:对应用层、中间件层、基础层进行监控。
>* 流量控制:负载均衡、服务路由、熔断、降级、限流等和流量相关的调度都会在这里。


## 参考文献

